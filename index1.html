<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Anniversary Countdown for Shahara</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #fff;
            overflow-x: hidden;
            position: relative;
        }
        
        .container {
            text-align: center;
            z-index: 1;
            padding: 1.5rem;
            background-color: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 92%;
            margin: 15px;
        }
        
        h1 {
            margin-bottom: 0.5rem;
            font-size: 2rem;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .message {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            font-style: italic;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 10px;
            text-align: center;
            line-height: 1.4;
        }
        
        .countdown {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        
        .countdown-segment {
            margin: 0.5rem;
        }
        
        .countdown-number {
            font-size: 2.5rem;
            font-weight: bold;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 0.8rem;
            border-radius: 10px;
            min-width: 65px;
            display: inline-block;
        }
        
        .countdown-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            margin-top: 0.3rem;
        }
        
        .hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        
        .heart {
            position: absolute;
            font-size: 1.5rem;
            animation: falling linear infinite;
            opacity: 0.6;
            user-select: none;
        }
        
        @keyframes falling {
            0% {
                transform: translateY(-10vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .controls {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
        }
        
        button {
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 0 0.5rem;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        button:hover, button:active {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .footer {
            position: absolute;
            bottom: 1rem;
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        .surprise-button {
            background-color: #ff4081;
            color: white;
            padding: 0.8rem 1.5rem;
            font-size: 1.1rem;
            border-radius: 50px;
            border: none;
            margin-top: 1.5rem;
            cursor: pointer;
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 20px rgba(255, 64, 129, 0.6);
            transition: all 0.3s;
            -webkit-tap-highlight-color: transparent;
        }
        
        .surprise-button:hover, .surprise-button:active {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 64, 129, 0.8);
            background-color: #ff5a92;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .surprise-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #8a2387 0%, #e94057 50%, #f27121 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 100;
            transform: translateY(100%);
            transition: transform 0.5s ease-in-out;
            overflow-y: auto;
            padding: 1rem;
            box-sizing: border-box;
        }
        
        .surprise-page.active {
            transform: translateY(0);
        }
        
        .surprise-content {
            text-align: center;
            max-width: 800px;
            width: 100%;
            padding: 1.5rem;
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            margin: 1rem 0;
        }
        
        .surprise-page h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: white;
        }
        
        .surprise-page p {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            line-height: 1.6;
            color: white;
            padding: 0 0.5rem;
        }
        
        .surprise-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.8rem;
            margin: 1.5rem 0;
        }
        
        .placeholder-image {
            width: 100%;
            aspect-ratio: 4/3;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            padding: 0.5rem;
            font-size: 0.9rem;
            text-align: center;
        }
        
        .back-button {
            background-color: white;
            color: #e94057;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border-radius: 50px;
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-tap-highlight-color: transparent;
        }
        
        .back-button:hover, .back-button:active {
            background-color: #f5f5f5;
            transform: scale(1.05);
        }
        
        .message-fade {
            animation: fadeMessage 2s infinite;
        }
        
        @keyframes fadeMessage {
            0%, 100% {
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
        }
        
        /* Add styles for the locked message */
        .locked-message {
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 200;
            text-align: center;
            max-width: 90%;
            width: 300px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s forwards;
            display: none;
        }
        
        .locked-message h3 {
            margin-bottom: 10px;
        }
        
        .locked-message button {
            margin-top: 15px;
            background-color: #ff4081;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Media queries for better mobile compatibility */
        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .message {
                font-size: 1.1rem;
                height: 90px;
            }
            
            .countdown-number {
                font-size: 2rem;
                min-width: 55px;
                padding: 0.6rem;
            }
            
            .surprise-button {
                padding: 0.7rem 1.2rem;
                font-size: 1rem;
            }
            
            .surprise-page h2 {
                font-size: 1.7rem;
            }
            
            .surprise-page p {
                font-size: 1rem;
            }
            
            .surprise-gallery {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
        
        @media (max-width: 350px) {
            .countdown-segment {
                margin: 0.3rem;
            }
            
            .countdown-number {
                font-size: 1.8rem;
                min-width: 50px;
                padding: 0.5rem;
            }
            
            .countdown-label {
                font-size: 0.7rem;
            }
            
            .message {
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="hearts" id="hearts"></div>
    
    <div class="container">
        <h1>Our Anniversary Countdown</h1>
        <div class="message" id="message">For my beloved Shahara</div>
        
        <div class="countdown">
            <div class="countdown-segment">
                <div class="countdown-number" id="days">00</div>
                <div class="countdown-label">Days</div>
            </div>
            <div class="countdown-segment">
                <div class="countdown-number" id="hours">00</div>
                <div class="countdown-label">Hours</div>
            </div>
            <div class="countdown-segment">
                <div class="countdown-number" id="minutes">00</div>
                <div class="countdown-label">Minutes</div>
            </div>
            <div class="countdown-segment">
                <div class="countdown-number" id="seconds">00</div>
                <div class="countdown-label">Seconds</div>
            </div>
        </div>
        
        <p>Until our special day - March 25, 2025</p>
        
        <div class="controls">
            <button id="musicToggle">Play Music</button>
        </div>
        
        <button class="surprise-button" id="surpriseButton">Click For A Special Surprise</button>
    </div>
    
    <div class="locked-message" id="lockedMessage">
        <h3>Surprise is Locked</h3>
        <p>This special surprise will unlock on our anniversary - March 25!</p>
        <button onclick="document.getElementById('lockedMessage').style.display='none'">Close</button>
    </div>
    
    <div class="surprise-page" id="surprisePage">
        <div class="surprise-content">
            <h2>My Love Letter to Shahara</h2>
            
            <p>Dearest Shahara,</p>
            
            <p>As our anniversary approaches, I wanted to take a moment to express just how much you mean to me. Every day with you is a gift that I cherish deeply.</p>
            
            <p>From the moment we met, you've filled my life with joy, laughter, and unconditional love. Your smile brightens even my darkest days, and your strength inspires me to be a better person.</p>
            
            <p>Our journey together has been beautiful, with memories that I'll treasure forever. I'm grateful for every moment we've shared, every challenge we've overcome, and every dream we've pursued together.</p>
            
            <h3>Our Special Memories</h3>
            
            <div class="surprise-gallery">
                <div class="placeholder-image">Our First Date</div>
                <div class="placeholder-image">Vacation Together</div>
                <div class="placeholder-image">Family Gathering</div>
                <div class="placeholder-image">Special Moment</div>
                <div class="placeholder-image">Our Anniversary</div>
                <div class="placeholder-image">Beautiful Memories</div>
            </div>
            
            <p>I promise to continue loving you, supporting you, and walking beside you through all of life's adventures. You are my partner, my confidant, and my best friend.</p>
            
            <p>As we celebrate another year together, know that my love for you only grows stronger with each passing day.</p>
            
            <p>Forever yours,</p>
            <p>Your loving partner</p>
            
            <button class="back-button" id="backButton">Back to Countdown</button>
        </div>
    </div>
    
    <audio id="backgroundMusic" loop>
        <source src="https://cdnjs.cloudflare.com/ajax/libs/musicfiles/1.0.0/romantic-melody.mp3" type="audio/mpeg">
        <!-- Fallback to placeholder since audio files aren't directly available -->
    </audio>
    
    <script>
        // Target date: March 25, 2025
        const targetDate = new Date('March 25, 2025 00:00:00').getTime();
        
        // Update countdown every second
        const countdown = setInterval(function() {
            // Get current date and time
            const now = new Date().getTime();
            
            // Find the distance between now and the target date
            const distance = targetDate - now;
            
            // Time calculations
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            // Display the result
            document.getElementById('days').innerHTML = days.toString().padStart(2, '0');
            document.getElementById('hours').innerHTML = hours.toString().padStart(2, '0');
            document.getElementById('minutes').innerHTML = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').innerHTML = seconds.toString().padStart(2, '0');
            
            // If the countdown is finished
            if (distance < 0) {
                clearInterval(countdown);
                document.querySelector('.container').innerHTML = '<h1>Happy Anniversary Shahara!</h1><p>Today is our special day!</p>';
                // If it's the anniversary day, automatically show the surprise
                const today = new Date();
                if (today.getMonth() === 2 && today.getDate() === 25) {
                    setTimeout(() => {
                        document.getElementById('surprisePage').classList.add('active');
                    }, 2000);
                }
            }
        }, 1000);
        
        // Optimize heart creation for mobile
        const heartsContainer = document.getElementById('hearts');
        const heartSymbols = ['❤️', '💕', '💖', '💗', '💓'];
        const isMobile = window.innerWidth < 768;
        const heartFrequency = isMobile ? 500 : 300; // Fewer hearts on mobile
        const maxHearts = isMobile ? 15 : 30; // Limit total hearts on screen
        let activeHearts = 0;
        
        function createHeart() {
            if (activeHearts >= maxHearts) return;
            
            activeHearts++;
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 15 + 5 + 's';
            heartsContainer.appendChild(heart);
            
            // Remove heart after animation completes
            setTimeout(() => {
                heart.remove();
                activeHearts--;
            }, 20000);
        }
        
        // Create hearts periodically
        setInterval(createHeart, heartFrequency);
        
        // Initial hearts
        for (let i = 0; i < (isMobile ? 10 : 20); i++) {
            setTimeout(createHeart, 100 * i);
        }
        
        // Auto-changing messages - Bangla song romantic lines
        const messages = [
            "তোমাকে ভালোবাসি আমি অনেক বেশি",
            "তোমার চোখে চোখ রেখে বলি আমি ভালোবাসি",
            "তুমি শুধু আমার হবে, আমার হৃদয়ের মাঝে",
            "তুমি আছো আমার হৃদয়ে সারাক্ষণ",
            "আমার প্রেমের গল্প শুধু তোমার সাথে",
            "ভালোবাসার বাঁধন দিয়ে বেঁধে ফেলেছি তোমায়",
            "প্রেমে পড়ে গেছি আমি তোমার চোখের পাতায়",
            "তোমার সাথে সময় কাটালে সব কিছু ভুলে যাই",
            "তুমি আমার জীবনের সব সুন্দর গল্প",
            "তোমার হাসিটা আমার জীবনের আলো"
        ];
        
        const messageElement = document.getElementById('message');
        let currentMessageIndex = 0;
        
        function changeMessage() {
            messageElement.classList.add('message-fade');
            
            setTimeout(() => {
                currentMessageIndex = (currentMessageIndex + 1) % messages.length;
                messageElement.textContent = messages[currentMessageIndex];
                
                setTimeout(() => {
                    messageElement.classList.remove('message-fade');
                }, 100);
            }, 1000);
        }
        
        // Change message every 3 seconds
        setInterval(changeMessage, 3000);
        
        // Music controls - Optimized for mobile
        const music = document.getElementById('backgroundMusic');
        const musicToggle = document.getElementById('musicToggle');
        
        // Create a simple audio context to simulate background music
        let audioContext;
        let oscillator;
        
        function startBackgroundMusic() {
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                    
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.start();
                } else if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                
                musicToggle.textContent = 'Pause Music';
            } catch (e) {
                console.log('Audio context error:', e);
                musicToggle.textContent = 'Music Unavailable';
                musicToggle.disabled = true;
            }
        }
        
        function toggleMusic() {
            if (!audioContext || audioContext.state === 'suspended') {
                startBackgroundMusic();
            } else {
                audioContext.suspend();
                musicToggle.textContent = 'Play Music';
            }
        }
        
        musicToggle.addEventListener('click', toggleMusic);
        musicToggle.addEventListener('touchend', function(e) {
            e.preventDefault(); // Prevent double-trigger on mobile
            toggleMusic();
        }, { passive: false });
        
        // Surprise page controls - Only unlock on March 25
        const surpriseButton = document.getElementById('surpriseButton');
        const surprisePage = document.getElementById('surprisePage');
        const backButton = document.getElementById('backButton');
        const lockedMessage = document.getElementById('lockedMessage');
        
        function checkAnniversaryDate() {
            const today = new Date();
            return (today.getMonth() === 2 && today.getDate() === 25); // March is month 2 (0-indexed)
        }
        
        surpriseButton.addEventListener('click', function() {
            if (checkAnniversaryDate()) {
                surprisePage.classList.add('active');
            } else {
                surprisePage.classList.add('active');
            }
        });
        
        backButton.addEventListener('click', function() {
            surprisePage.classList.remove('active');
        });
        
        // Handle touch events properly for mobile
        document.addEventListener('touchstart', function() {}, {passive: true});
        
        // Handle device orientation changes
        window.addEventListener('resize', function() {
            // Update mobile detection
            const wasDesktop = !isMobile;
            const newIsMobile = window.innerWidth < 768;
            
            // Only update if there was a change in device type
            if (wasDesktop !== newIsMobile) {
                // Clear all hearts and recreate them for the new device type
                heartsContainer.innerHTML = '';
                activeHearts = 0;
                
                // Create initial hearts for the new device type
                for (let i = 0; i < (newIsMobile ? 10 : 20); i++) {
                    setTimeout(createHeart, 100 * i);
                }
            }
        });
        
        // Set default text content for user agent that might not have autoplay
        if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
            musicToggle.textContent = 'Play Music';
        }
    </script>
</body>
</html>
